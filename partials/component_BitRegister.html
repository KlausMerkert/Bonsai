<div class="component nospace" ng-style="{'top': topCSS, 'left': leftCSS}">
    <div class="bitregister" ng-style="{'height': (getBits().length * 12) + 'px'}">
        <div style="width: 0; height: 0; overflow: visible; display: inline-block; position: absolute;">
            <div ng-click="toggleWideBusState()"
                 class="connection"
                 ng-style="{'background-color': gateColor}"
                 style="left: 18px;">
                <div ng-show="register.wideBusConnection.state == 1"
                     style="position: relative; top: -0.1em; left: 0.01em;" class="unselectable">&uarr;</div>
                <div ng-show="register.wideBusConnection.state == 0"
                     style="position: relative; top: 0.05em; left: 0.01em;" class="unselectable">&bull;</div>
                <div ng-show="register.wideBusConnection.state == -1"
                     style="position: relative; top: -0.1em; left: 0.01em;" class="unselectable">&darr;</div>
                <div style="position: absolute; top: 8px; left: 10px;" class="flanktriggered"></div>
            </div>
            <div class="bitconnections grayback" style="position: absolute; left: -6px; top: -9px; width: 18px;"
                 ng-style="{'height': (getBits().length * 12 + 16) + 'px'}">
                <div ng-repeat="bit in getBits() track by $index"
                     style="padding: 0; margin: 0; height: 12px; cursor: pointer; position: absolute; left: 1px;"
                     ng-style="{'top': ($index * 12 + 7) + 'px'}">
                    <span ng-show="register.bitWiresConnection.state == -1">&#8594;</span>
                    <span style="padding: 0 5px; position: relative; top: 2px;"
                          ng-show="register.bitWiresConnection.state == 0">&bull;</span>
                    <span ng-show="register.bitWiresConnection.state == 1">&#8592;</span>
                </div>
            </div>
            <div class="nospace" style="position: absolute;">
                <div class="busconnector"
                     style="position: absolute; left: 23px; top: -26px;"></div>
                <div class="wireconnector write"
                     style="position: absolute; left: 32px; top: -20px;"
                     ng-mousedown="activateWriteWire()"
                     ng-mouseup="deactivateWriteWire()"></div>
                <div class="wireconnector read"
                     style="position: absolute; left: 32px; top: -13px;"
                     ng-mousedown="activateReadWire()"></div>
                <div class="wireconnector write"
                     style="position: absolute; left: -3px; top: -13px;"
                     ng-mousedown="activateWireWrite()" ng-mouseup="deactivateWireWrite()"></div>
                <div class="wireconnector read"
                     style="position: absolute; left: 5px; top: -13px;"
                     ng-mousedown="activateWireRead()" ng-mouseup="deactivateWireRead()"></div>
                <div ng-repeat="bit in getBits() track by $index"
                     class="wireconnector grayback" style="left: -10px;"
                     ng-style="{'top': ($index * 12 + 4) + 'px'}"
                     ng-mousedown="activateBit($index)" ng-mouseup="deactivateBit($index)"></div>
            </div>
        </div>
        <div ng-repeat="bit in getBits() track by $index"
             style="padding: 0; margin: 0; height: 12px; cursor: pointer; position: absolute;"
             ng-style="{'top': ($index * 12 + 7) + 'px'}">
            <div style="display: inline-block; margin: 0; width: 10px; font-family: monospace; position: absolute; left: 15px;"
                 ng-mousedown="register.setBit($index, (register.getBit($index) + 1) % 2)"
                 class="unselectable">{{ bit }}</div>
            <div style="display: inline-block; margin: 0; padding-left: 2px; width: 10px; font-family: monospace; color: rgba(0, 0, 0, 0.5); text-align: right; position: absolute; left: 25px;"
                 ng-mousedown="register.setBit($index, (register.getBit($index) + 1) % 2)"
                 class="unselectable">{{ $index }}</div>
        </div>
        <div style="width: 0; height: 0; display: inline-block; position: absolute;" ng-transclude></div>
    </div>
</div>